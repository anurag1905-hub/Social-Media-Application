{function getPost(e,t,n){return $(`<div class="container-fluid toggle-post" id="post-${e._id}" style="padding-left:1rem;padding-right:1rem;">\n        <div class="card" style="padding:1rem;margin-bottom:2rem;">\n            <div class="card-header post-info flex-wrapper" style="height:3rem;background-color: lightblue;">\n                <div class="profile-link-post" style="font-weight:700;">\n                    <img src="${t.avatar}" width="30" height="30" class="rounded-circle"> &nbsp; <a href="/users/profile/${e.user._id}">${e.user.name}</a>\n                </div>\n                <div style="font-weight:750;">\n                    ${n} at ${e.time}\n                </div>\n            </div>\n            \x3c!-- convert string to html --\x3e\n            <div class="card-body post-content-${e._id}" style="min-height:10rem;height:auto;color:black;">\n                ${e.content}  \n            </div>\n            <div class="card-footer">\n                <div class="posts-footer">\n                    <div>\n                        <a class="toggle-like-button" data-likes="${e.likes.length}" href="/likes/toggle/?id=${e._id}&type=Post">Like <span class="badge badge-info">${e.likes.length}</span></a>\n                        <a data-toggle="collapse" class="toggle-comments-button-${e._id}" data-comments="${e.comments.length}"  href="#collapse${e._id}">Comments <span class="badge badge-info">${e.comments.length}</span></a><br> \n                    </div>\n                    <div id="delete">\n                        \n                    </div>\n                </div>\n            </div>\n\n            <div id="collapse${e._id}" class="panel-collapse collapse container-fluid group-comments" style="padding-left:2rem;background-color: lightgrey;">\n\n                <form action="/comments/create/" method="post" class="post-${e._id}-comments-form" style="margin-top:1rem;margin-bottom:1rem;">\n                    <div class="form-group">\n                        <input type="text" name="content" class="form-control comment-content-input-${e._id}" placeholder="Add a comment" required>\n                    </div>\n                    <div class="form-group">\n                        <input type="hidden" name="post" value="${e._id}">\n                    </div>\n                    <button type="submit" class="btn btn-success">Add Comment</button>\n                </form>\n\n                <br>\n\n                <div class="comments-section${e._id}">\n                     \n                </div>\n            </div>  \n        </div>\n    </div>`)}function getComment(e,t,n){return $(`<div class="card  comments-list-container${t._id} comment-group" id="comment-${e._id}" style="margin-right:0px;margin-bottom:1rem;">\n                <div class="card-header bg-success comment-info flex-wrapper" style="height:3rem;"> \n                    <div class="profile-link-comment" style="font-weight:700;">\n                        <img src="${e.user.avatar}" width="30" height="30" class="rounded-circle"> &nbsp; <a href="/users/profile/${e.user._id}">${e.user.name}</a>&nbsp;\n                    </div>\n                    <div>\n                       ${n} at ${e.time}\n                    </div>\n                </div>\n                <div class="card-body comment-content-${e._id}">    \n                    \x3c!-- Convert string to html --\x3e\n                    ${e.content}       \n                </div>\n                <div class="card-footer">\n                    <div id="delete">\n                        <a class="toggle-like-button" data-likes="${e.likes.length}" href="/likes/toggle/?id=${e._id}&type=Comment">Like <span class="badge badge-info">${e.likes.length}</span></a>\n                    </div>\n                 </div>\n            </div>`)}function getCompletePost(e,t,n){let s=getPost(e,t,new Date(e.createdAt).toDateString());new ToggleLike($(" .toggle-like-button",s));let r=$(s).find(`.comments-section${e._id}`);for(comment of e.comments){let t=new Date(comment.createdAt);t=t.toDateString();let s=getComment(comment,e,t);if(comment.user._id==n){$(s).find("#delete").append(`\n                    <div>\n                    <a href="/comments/edit/${comment._id}" class="edit-comment target-comment-${comment._id}" data-targetComment="${comment._id}">Edit <i class="fas fa-edit"></i></a> &nbsp;\n                    <a href="/comments/destroy/${comment._id}" class="delete-comment-button" data-test="${comment._id}">Delete <i class="fas fa-trash"></i></a> \n                    </div>\n                `)}editComment(),saveComment(),$(r).append(s)}return s}function sendFriendRequest(){$(".send-friend-request").click((function(e){e.preventDefault();let t=$(this).attr("data-targetUser");$.ajax({type:"get",url:$(this).prop("href"),success:function(e){},error:function(e){console.log(e.responseText)}}),$(".send-friend-request").replaceWith(`\n                <a href="/users/friends/withdrawRequest/${t}" class="btn btn-danger withdraw-friend-request" data-targetUser="${t}">Withdraw Friend Request</a>\n            `),withdrawFriendRequest()}))}function withdrawFriendRequest(){$(".withdraw-friend-request").click((function(e){e.preventDefault();let t=$(this).attr("data-targetUser");$.ajax({type:"get",url:$(this).prop("href"),success:function(e){},error:function(e){console.log(e.responseText)}}),$(".withdraw-friend-request").replaceWith(`\n                <a href="/users/friends/sendRequest/${t}" class="btn btn-success send-friend-request" data-targetUser="${t}">Send Friend Request</a>\n            `),sendFriendRequest()}))}function acceptFriendRequest(){$(".accept-friend-request").click((function(e){e.preventDefault();let t,n=$(this).attr("data-targetUser");$.ajax({async:!1,type:"get",url:$(this).prop("href"),success:function(e){for(post of($(".reject-friend-request").remove(),$(".media").remove(),$(".message").remove(),$(".text").html("POSTS"),t=e.data.newfriends,e.data.profileUser.posts)){let t=getCompletePost(post,e.data.profileUser,e.data.owner);$(".post-group").append(t),new PostComments(post._id)}0==e.data.profileUser.posts.length&&$(".text").append('\n                           <p class="message responsive-text"> No posts yet :) </p>\n                        ')},error:function(e){console.log(e.responseText)}}),t?$(".accept-friend-request").replaceWith(`\n                <a href="/users/friends/getFriends/${n}" class="btn btn-success view-friends" data-targetUser="${n}">View Friends</a>\n                <a href="/users/friends/removeFriend/${n}" class="btn btn-danger remove-friend" data-targetUser="${n}">Remove Friend</a>\n                `):$(".accept-friend-request").replaceWith(`\n                    <a href="/users/friends/getFriends/${n}" class="btn btn-success view-friends" data-targetUser="${n}">View Friends</a>\n                `),removeFriend(),viewFriends()}))}function rejectFriendRequest(){$(".reject-friend-request").click((function(e){e.preventDefault();let t=$(this).attr("data-targetUser");$.ajax({type:"get",url:$(this).prop("href"),success:function(e){$(".accept-friend-request").remove()},error:function(e){console.log(e.responseText)}}),$(".reject-friend-request").replaceWith(`\n               <a href="/users/friends/sendRequest/${t}" class="btn btn-success send-friend-request" data-targetUser="${t}">Send Friend Request</a>\n            `),sendFriendRequest()}))}function removeFriend(){$(".remove-friend").click((function(e){e.preventDefault();let t=$(this).attr("data-targetUser");$.ajax({type:"get",url:$(this).prop("href"),success:function(e){$(".toggle-post").remove(),$(".view-friends").remove(),$(".media").remove(),$(".view-friends").remove(),$(".accept-friend-request").remove()},error:function(e){console.log(e.responseText)}}),$(".remove-friend").replaceWith(`\n               <a href="/users/friends/sendRequest/${t}" class="btn btn-success send-friend-request" data-targetUser="${t}">Send Friend Request</a>\n            `),0==$(".message").length?$(".text").append('\n                    <p class="message responsive-text">Private Account :(</p>\n                '):$(".message").html("Private Account :("),sendFriendRequest()}))}function getFriendDom(e){return $(`<div class="media border p-3 mb-3">\n        <img src="${e.avatar}" alt="profile pic" class="mr-3 rounded-circle" style="width:60px;height:60px;">\n        <div class="media-body">\n            <div class="d-flex">\n                <div class="p-2" style="font-weight:800;font-size:1rem;">\n                    <a href="/users/profile/${e._id}" class="p-2">${e.name}</a>\n                </div>\n                <div class="ml-auto bg-success success-button">\n                    <a href="/users/profile/${e._id}" class="p-2">View Profile</a>\n                </div>\n            </div>\n        </div>\n    </div>\n    `)}function viewFriends(){$(".view-friends").click((function(e){e.preventDefault(),$(".text").html("FRIENDS"),$(".toggle-post").remove();let t=$(this).attr("data-targetUser");$.ajax({type:"get",url:$(this).prop("href"),success:function(e){for(friend of e.data.friends){let e=getFriendDom(friend);$(".post-group").append(e)}},error:function(e){console.log(e.responseText)}}),$(".view-friends").replaceWith(`\n                <a href="/users/friends/acceptRequest/${t}" class="btn btn-success accept-friend-request" data-targetUser="${t}">View Posts</a>\n            `),acceptFriendRequest(),removeFriend()}))}removeFriend(),rejectFriendRequest(),acceptFriendRequest(),withdrawFriendRequest(),sendFriendRequest(),viewFriends()}