function gotoBottom(s){var s=$("#"+s),e=s.prop("scrollHeight");s.animate({scrollTop:e},0)}class ChatEngine{constructor(s,e,t,o){this.chatBox=$("#"+s),this.userEmail=e,this.chatRoom=t,this.sender=o,this.socket=io("http://18.221.30.176:5000",{transports:["websocket","polling","flashsocket"]}),this.userEmail&&this.connectionHandler(),gotoBottom("chat-messages-list")}connectionHandler(){let o=this;this.socket.on("connect",function(){o.socket.emit("join_room",{user_email:o.userEmail,chatroom:o.chatRoom}),o.socket.on("user_joined",function(s){}),$("#send-message").click(function(){var s=$("#chat-message-input").val();$("#chat-message-input").val(""),$("#chat-messages-list");""!=s&&(o.socket.emit("send_message",{message:s,user_email:o.userEmail,chatroom:o.chatRoom,sender:o.sender}),gotoBottom("chat-messages-list"))}),o.socket.on("receive_message",function(s){let e=$("<li>"),t="other-message";s.user_email==o.userEmail&&(t="self-message"),e.append($("<span>",{html:s.message})),e.addClass(t),$("#chat-messages-list").append(e),gotoBottom("chat-messages-list")})})}}