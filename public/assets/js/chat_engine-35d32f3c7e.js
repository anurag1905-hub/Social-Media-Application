function gotoBottom(s){var e=$(`#${s}`),t=e.prop("scrollHeight");e.animate({scrollTop:t},0)}class ChatEngine{constructor(s,e,t,o){this.chatBox=$(`#${s}`),this.userEmail=e,this.chatRoom=t,this.sender=o,this.socket=io("http://localhost:5000",{transports:["websocket","polling","flashsocket"]}),this.userEmail&&this.connectionHandler(),gotoBottom("chat-messages-list")}connectionHandler(){let s=this;this.socket.on("connect",(function(){s.socket.emit("join_room",{user_email:s.userEmail,chatroom:s.chatRoom}),s.socket.on("user_joined",(function(s){})),$("#send-message").click((function(){let e=$("#chat-message-input").val();$("#chat-message-input").val("");$("#chat-messages-list");""!=e&&(s.socket.emit("send_message",{message:e,user_email:s.userEmail,chatroom:s.chatRoom,sender:s.sender}),gotoBottom("chat-messages-list"))})),s.socket.on("receive_message",(function(e){let t=$("<li>"),o="other-message";e.user_email==s.userEmail&&(o="self-message"),t.append($("<span>",{html:e.message})),t.addClass(o),$("#chat-messages-list").append(t),gotoBottom("chat-messages-list")}))}))}}